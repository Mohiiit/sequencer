name: Bootstrap
description: Install dependencies.

inputs:
  extra_rust_toolchains:
    description: "Extra toolchains to install, but aren't used by default"
    required: false
  rust_target_profile:
    description: "Name of the target profile to cache."
    default: "debug"

runs:
  using: "composite"
  steps:
    # required to clone native as a gitsubmodule
    - name: Submodules update.
      run: git submodule update --init --recursive
      shell: bash
    - name: Install rust.
      uses: ./.github/actions/install_rust
      with:
        extra_rust_toolchains: ${{ inputs.extra_rust_toolchains }}
        rust_target_profile: ${{ inputs.rust_target_profile }}
    - name: Install cairo native.
      uses: ./.github/actions/setup_native_deps
